[
  {
    "name": "create random string",
    "key": "create_random_string",
    "type": "exec",
    "position_x": 22,
    "position_y": 8,
    "options": {
      "code": "module.exports = async function(data) {\n\tlet result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    let counter = 0;\n    while (counter < 15) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      counter += 1;\n    }\n\treturn {\n    \t\"randomString\": result\n    };\n}"
    },
    "resolve": "9f886300-231b-48e1-8963-4ae77b5c1a64",
    "reject": null,
    "flow": "0c5d8064-2bf3-4284-b88b-23eeac843879",
    "_syncId": "2656a256-78dd-40f6-9c90-1719cf7fc81f"
  },
  {
    "name": "Run Script",
    "key": "exec_26dao",
    "type": "exec",
    "position_x": 37,
    "position_y": 1,
    "options": {
      "code": "module.exports = async function(data) {\n    if (data?.$last.length > 0) { // check if payload from $last operation is not empty\n        const ids = [];\n        data?.$last.map(item => {\n             // add file-field (asset) id to array of ids\n             if (item?.avatar)\n             \tids.push(item?.avatar); \n\n             // it can be another additional file field in your data model\n             // e.g. ids.push(item?.my_image_field);\n             //        ids.push(item?.my_whatever_file_field); \n        })\n        return ids; // This will be the ready-to-go-array of file ids for the DELETE request body\n    }\n    return {};\n}"
    },
    "resolve": "f2814457-4acd-4727-a4fb-f4a817b8eadf",
    "reject": null,
    "flow": "7f53dd18-b651-4f92-84c9-3af16cfae9ec",
    "_syncId": "76ced6f9-df9a-421c-8629-18673ff6aaa7"
  },
  {
    "name": "Run Script",
    "key": "exec_2g71r",
    "type": "exec",
    "position_x": 19,
    "position_y": 1,
    "options": {
      "code": "module.exports = async function(data) {\n\tlet result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    let counter = 0;\n    while (counter < 15) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      counter += 1;\n    }\n\treturn {\n    \t\"randomString\": result\n    };\n}"
    },
    "resolve": "3d2f81d7-1471-4feb-81a4-23bcc94580bb",
    "reject": null,
    "flow": "926fe0af-3868-43dc-8962-6b17426e51f6",
    "_syncId": "0198296a-ab56-4c8a-b38f-b89003ccb803"
  },
  {
    "name": "Run Script",
    "key": "exec_4mfng",
    "type": "exec",
    "position_x": 37,
    "position_y": 1,
    "options": {
      "code": "module.exports = async function(data) {\n\t\n\treturn {\n    \t...{{ $trigger.payload }},\n        \"uniqueId\": \"{{ $last.randomString }}\"        \n    };\n}"
    },
    "resolve": null,
    "reject": null,
    "flow": "926fe0af-3868-43dc-8962-6b17426e51f6",
    "_syncId": "3d2f81d7-1471-4feb-81a4-23bcc94580bb"
  },
  {
    "name": "Read Data",
    "key": "item_read_5bq5t",
    "type": "item-read",
    "position_x": 19,
    "position_y": 1,
    "options": {
      "collection": "{{$trigger.collection}}",
      "query": {
        "filter": {
          "id": {
            "_in": "{{$trigger.payload}}"
          }
        }
      }
    },
    "resolve": "76ced6f9-df9a-421c-8629-18673ff6aaa7",
    "reject": null,
    "flow": "7f53dd18-b651-4f92-84c9-3af16cfae9ec",
    "_syncId": "3a1a1ca2-9c44-441d-b6af-b82147e23c8a"
  },
  {
    "name": "Update Data",
    "key": "item_update_bg87p",
    "type": "item-update",
    "position_x": 23,
    "position_y": 24,
    "options": {
      "permissions": "$full",
      "collection": "bookable_object",
      "query": {
        "filter": {
          "id": {
            "_in": "{{ $trigger.body.keys }}"
          }
        }
      },
      "payload": {
        "uniqueId": "{{ $last.randomString }}"
      },
      "key": []
    },
    "resolve": null,
    "reject": null,
    "flow": "0c5d8064-2bf3-4284-b88b-23eeac843879",
    "_syncId": "9f886300-231b-48e1-8963-4ae77b5c1a64"
  },
  {
    "name": "Log to Console",
    "key": "log_edne5",
    "type": "log",
    "position_x": 48,
    "position_y": 14,
    "options": {
      "message": "{{ $last.randomString }}"
    },
    "resolve": null,
    "reject": null,
    "flow": "0c5d8064-2bf3-4284-b88b-23eeac843879",
    "_syncId": "d3b708dd-9828-4410-aacd-bd99541c33b2"
  },
  {
    "name": "Webhook / Request URL",
    "key": "request_c4vti",
    "type": "request",
    "position_x": 55,
    "position_y": 1,
    "options": {
      "url": "http://localhost:8055/files",
      "headers": [
        {
          "header": "Authorization",
          "value": "Bearer gmUt7iIiVNL8KO5EMUEciKnmHkI9uhbF"
        }
      ],
      "body": "{{$last}}",
      "method": "DELETE"
    },
    "resolve": null,
    "reject": null,
    "flow": "7f53dd18-b651-4f92-84c9-3af16cfae9ec",
    "_syncId": "f2814457-4acd-4727-a4fb-f4a817b8eadf"
  }
]
